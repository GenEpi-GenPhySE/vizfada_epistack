# vizfada_epistack
Generate epistack plots from processed FAANG data

## How to generate peak-score episatcks 

### requirements
- FAANG data processed by the [chipseq_vizfada](https://github.com/GenEpi-GenPhySE/chipseq_vizfada) pipeline, and **structured as for the [VizFaDa web application](https://forgemia.inra.fr/laura.morel/vizfada-app)**.
- The `_matching_celltype.csv` and `_matching_specimen.csv` metadata table, generated by **TODO: upload the script**, in the same location as the data.
- The path to the data folder, e.g. `/work/lmorel/data`
- The path to a version of the [epistack.R script](https://github.com/GenEpi-GenPhySE/epistack/blob/master/inst/epistack.R) with execution rights. This script can be found in the {episack} folder, e.g. `~/R/x86_64-pc-linux-gnu-library/4.1/epistack/epistack.R`

### generating the commands
- open the `vizfada_epistack_peak_scores.R` script.
- edit first lines (*paths* section) with the relevant paths.
- run interactively the *paths* section, the *library loading* section, the *function definitions*, and check for errors.
- run the *running functions* section for your species of interest. *Optional:* edit the `by = 100` parameter of the `write_commands()` function call according to your needs.

### launching the commands
- `sbatch epistack_cow_1.sh` on Genotoul

